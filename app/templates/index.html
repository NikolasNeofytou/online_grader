<!DOCTYPE html>
<html>
<head>
    <title>Online C++ Grader</title>
    <style>
        #editor { width: 100%; height: 300px; border: 1px solid #ccc; }
        textarea { display: none; }
        pre { background: #eee; padding: 10px; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/ext-language_tools.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/snippets/c_cpp.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        hljs.highlightAll();
        var editor = ace.edit('editor');
        editor.session.setMode('ace/mode/c_cpp');
        editor.setTheme('ace/theme/textmate');
        editor.setOptions({
          enableBasicAutocompletion: true,
          enableSnippets: true
        });
        var textarea = document.querySelector('textarea[name="code"]');
        editor.session.setValue(textarea.value || '');
        document.querySelector('form').addEventListener('submit', function() {
          textarea.value = editor.getValue();
        });
      });
    </script>
</head>
<body>
    <h1>Online C++ Grader</h1>
    <p><a href="{{ url_for('exercises_view') }}">Try the cout exercises</a></p>
    <form method="post">
        <div id="editor">{{code}}</div>
        <textarea name="code" id="code">{{code}}</textarea>
        <br>
        <button type="submit">Compile</button>
    </form>
    {% if output %}
    <h2>Result</h2>
    <pre><code class="language-text">{{output}}</code></pre>
    {% endif %}
</body>
</html>
